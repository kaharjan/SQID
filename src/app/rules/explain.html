<h1 translate="RULES.EXPLANATION"></h1>
<div ng-controller="ExplainController">
  <sqid-statement-table ng-if="explanation.statement"
                        data="explanation.statement"
                        title="{{ explanation.title }}">
  </sqid-statement-table>

  <table class="table table-striped table-condensed">
    <tbody>
      <tr>
        <td translate="RULES.RULE"></td>
        <td>{{ explanation.rule | formatRule }}</td>
      </tr>
      <tr ng-if="explanation.labels">
        <td translate="RULES.LITERALS"</td>
        <td>
          <table class="table table-striped table-condensed">
            <thead>
              <tr>
                <th translate="RULES.LITERAL"></th>
                <th translate="RULES.ENTITY"></th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="(literal, label) in explanation.labels">
                <td>{{ literal }}</td>
                <td ng-bind-html="label"></td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
      <tr ng-if="explanation.bounds">
        <td translate="RULES.BINDINGS"></td>
        <td>
          <table class="table table-striped table-condensed">
            <thead>
              <tr>
                <th translate="RULES.BINDING"></th>
                <th translate="RULES.ENTITY"></th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="(variable, binding) in explanation.bounds">
                <td>{{ variable }}</td>
                <td ng-bind-html="binding"></td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
      <tr ng-if="explanation.constraints.length">
        <td translate="RULES.CONSTRAINTS"></td>
        <td>
          <table class="table table-striped table-condensed">
            <thead>
              <tr>
                <th translate="RULES.CONSTRAINT_TYPE"></th>
                <th colspan="2" translate="RULES.CONSTRAINT_ARGUMENTS"></th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="constraint in explanation.constraints">
                <td>{{ constraint.type }}</td>
                <td>{{ constraint.args[0] }}</td>
                <td>{{ constraint.args[1] }}</td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
      <tr>
        <td translate="RULES.QUERY"></td>
        <td>{{ explanation.query }}</td>
      </tr>
    </tbody>
  </table>
</div>
